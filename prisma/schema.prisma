generator client {
  provider = "prisma-client"
  output   = "../app/generated/prisma"
}

datasource db {
  provider = "postgresql"
}

model Patient {
  id           String    @id @default(cuid())
  nationalId   String?   @unique
  firstName    String
  lastName     String
  phone        String?
  dateOfBirth  DateTime?
  gender       String?
  createdAt    DateTime  @default(now())
  updatedAt    DateTime  @updatedAt

  visits       Visit[]

  @@map("patients")
}

model Visit {
  id             String    @id @default(cuid())
  patientId      String
  visitDate      DateTime  @default(now())
  weightKg       Float?
  heightCm       Float?
  bloodPressure  String?
  fundalHeight   Float?
  fetalHeartRate Int?
  notes          String?
  recordedBy     String 
  patient        Patient   @relation(fields: [patientId], references: [id])

  @@map("visits")
}

model User {
  id        String   @id @default(cuid())
  email     String   @unique
  password  String
  name      String?
  role      Role     @default(VIEWER)
  createdAt DateTime @default(now())

  @@map("users")
}

enum Role {
  ADMIN
  CLINICIAN
  DATA_CLERK
  VIEWER
}